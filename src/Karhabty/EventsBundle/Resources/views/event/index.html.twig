{% extends 'layout/LayoutUser.html.twig' %}

{% block content %}

<span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span>
<span class="mt-action-buttons ">
     <div class="btn-group btn-group-circle">
       <button type="button" class="btn btn-outline green btn-sm"><a href="{{ path('event_new') }}">Créer un nouvel événement</a></button>
    </div>
</span>
    <div class="portlet light bordered">
        <div class="portlet-title tabbable-line">
            <div class="caption">
                <i class=" icon-social-twitter font-dark hide"></i>
                <span class="caption-subject font-dark bold uppercase">Evénements</span>
            </div>
            <ul class="nav nav-tabs">
                <li class="{% if   criteria == null %}active{% endif %}">
                    <a href="{{path('event_index')}}"> Prochainement </a>
                </li>
                <li class="{% if  criteria == 'public'%}active{% endif %}">
                    <a href="{{path('event_filter',{criteria:'public'})}}"> Publiques </a>
                </li>
                {% if app.user  %}
                <li class="{% if  criteria == 'private'%}active{% endif %}">
                    <a href="{{path('event_filter',{criteria:'private'})}}"> Privés </a>
                </li>
                {% endif %}
                <li class="{% if  criteria == 'tri'%}active{% endif %}">
                    <a href="{{path('event_filter',{criteria:'tri'})}}"> Trié Par Date </a>
                </li>
            </ul>
        </div>
        <div class="portlet-body">
            <div class="tab-content">
                <div class="tab-pane active" id="tab_actions_pending">
                    <!-- BEGIN: Actions -->
                    {% for event in events %}
                    <div class="mt-actions">
                        <div class="mt-action">
                            <div class="mt-action-details ">
                                <h3 class="uppercase">
                                    <a  href="{{ path('event_show', { 'id': event.id }) }}">{{ event.title }}</a>
                                </h3>
                            </div>
                            <div class="mt-action-img">
                                <img src="{{ asset('uploads/brochures/' ~ event.photo) }}" class="img-responsive"  style="max-height: 200px;">
                            <div class="mt-action-body">
                                <p class="mt-action-desc">{{ event.description }}</p>
                                <div class="mt-action-row">
                                    <div class="mt-action-info ">
                                    </div>
                                    <div class="mt-action-datetime ">
                                        <div class="list-datetime bold uppercase font-red"> {% if event.eventDate %}{{ event.eventDate|date('d-m-Y') }}{% endif %} </div>
                                    </div>
                                    <div class="mt-action-buttons ">
                                        {% if app.user and app.user.id == event.user.id %}
                                        <div class="btn-group btn-group-circle">
                                            <button type="button" class="btn btn-outline green btn-sm"><a  href="{{ path('event_show', { 'id': event.id }) }}">Afficher</a></button>
                                            <button type="button" class="btn btn-outline red btn-sm"><a href="{{ path('event_edit', { 'id': event.id }) }}">Editer</a></button>
                                        </div>
                                        {% endif %}
                                        {% if app.user and app.user.id != event.user.id %}
                                        <div class="btn-group btn-group-circle">

                                            <button type="button" class="btn btn-outline green btn-sm"><a  href="{{ path('event_participate', { 'id': event.id }) }}">Participer</a></button>
                                            {% if event.id in participationRequests.accepted %}
                                            <button type="button" class="btn btn-outline red btn-sm"><a href="{{ path('event_cancel', { 'id': event.id }) }}">Annuler</a></button>
                                            {% endif %}
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>


                        {% endfor %}
                    <!-- END: Actions -->
                </div>
            </div>
        </div>
    </div>
{% endblock %}
